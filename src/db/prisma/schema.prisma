  generator client {
    provider = "prisma-client-js"
    output   = "../generated/prisma"
  }

  datasource db {
    provider = "postgresql"
  }

  model Admin {
  id        String   @id @default(uuid())
  email     String   @unique
  role      String   @default("admin")
  password  String
  createdAt DateTime @default(now())
}
  model Candidate {
    id           String   @id @default(uuid())
    firstName    String
    lastName     String
    mobileNumber String
    email        String   @unique
    password     String
    createdAt    DateTime @default(now())


    profile   CandidateProfile?
    documents CandidateDocument[]
  }

  enum UserRole {
    professor
    recruiter
    institution
  }

    enum IssuerStatus {
    pending
    suspended
    approved
  }
  model Issuer {
    id              String   @id @default(uuid())
    role            UserRole
    firstName       String?
    lastName        String?
    institutionName String?
    mobileNumber    String
    email           String   @unique
    password        String
    walletAddress   String   @unique
    createdAt       DateTime @default(now())
    status          IssuerStatus @default(pending) 
    institutionProfile InstitutionProfile?
    professorProfile   ProfessorProfile?
    recruiterProfile   RecruiterProfile?
    documents          IssuerDocument[]
    onboardingCompleted Boolean @default(false)
  }

  model InstitutionProfile {
  id                 String   @id @default(uuid())
  issuerId           String   @unique
  issuer             Issuer   @relation(fields: [issuerId], references: [id], onDelete: Cascade)

  institutionName    String
  industry           String
  description        String?
  location           String
  institutionType    String
  institutionWebsite String?
  yearEstablished    Int

  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model ProfessorProfile {
  id             String   @id @default(uuid())
  issuerId       String   @unique
  issuer         Issuer   @relation(fields: [issuerId], references: [id], onDelete: Cascade)

  universityName String
  collegeName    String
  department     String
  designation    String
  employmentType String
  joiningYear    Int

  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model RecruiterProfile {
  id              String   @id @default(uuid())
  issuerId        String   @unique
  issuer          Issuer   @relation(fields: [issuerId], references: [id], onDelete: Cascade)

  companyName     String
  industry        String
  department      String
  designation     String
  employmentType  String
  companyWebsite  String?
  linkedinProfile String?
  joiningYear     Int

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

model IssuerDocument {
  id        String   @id @default(uuid())
  issuerId  String
  issuer    Issuer   @relation(fields: [issuerId], references: [id], onDelete: Cascade)

  fileUrl   String
  type      String  

  createdAt DateTime @default(now())
}

model CandidateProfile {
  id             String   @id @default(uuid())
  candidateId    String   @unique
  universityName String
  collegeName    String
  majorName      String
  currentSem     Int
  startYear      String
  gradYear       String

  candidate      Candidate @relation(fields: [candidateId], references: [id])
}

model CandidateDocument {
  id          String   @id @default(uuid())
  candidateId String
  fileUrl     String
  type        String
  createdAt   DateTime @default(now())

  candidate   Candidate @relation(fields: [candidateId], references: [id])
}